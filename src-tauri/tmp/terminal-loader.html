<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Terminal Loader</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background: #2d2a2e;
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                overflow: hidden;
                font-family:
                    "SF Mono", "Fira Code", "Cascadia Code", "JetBrains Mono",
                    "Consolas", monospace;
            }

            .terminal {
                width: 580px;
                background: #19181a;
                border-radius: 10px;
                box-shadow:
                    0 0 0 1px rgba(114, 112, 114, 0.2),
                    0 25px 70px rgba(0, 0, 0, 0.6),
                    0 0 50px rgba(171, 157, 242, 0.05);
                overflow: hidden;
                position: relative;
                animation: terminal-boot 0.6s ease-out;
            }

            @keyframes terminal-boot {
                0% {
                    opacity: 0;
                    transform: scale(0.95) translateY(10px);
                }
                100% {
                    opacity: 1;
                    transform: scale(1) translateY(0);
                }
            }

            /* Title bar */
            .title-bar {
                height: 38px;
                background: #19181a;
                border-bottom: 1px solid rgba(114, 112, 114, 0.15);
                display: flex;
                align-items: center;
                padding: 0 14px;
                position: relative;
                z-index: 5;
            }

            .title-bar-dots {
                display: flex;
                gap: 7px;
            }

            .dot {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }

            .dot-red {
                background: #ff6188;
            }
            .dot-yellow {
                background: #ffd866;
            }
            .dot-green {
                background: #a9dc76;
            }

            .title-bar-text {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                color: #727072;
                font-size: 12px;
                letter-spacing: 0.5px;
            }
            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .author {
                padding: 16px 20px;
                text-align: center;
                color: #fcfcfa;
                font-size: 14px;
            }
            .author a {
                color: #ab9df2;
                text-decoration: none;
            }
            /* Terminal body — FIXED HEIGHT with scroll */
            .terminal-body {
                padding: 16px 20px;
                height: 420px;
                overflow-y: auto;
                position: relative;
                scroll-behavior: smooth;
            }

            /* Custom scrollbar */
            .terminal-body::-webkit-scrollbar {
                width: 6px;
            }
            .terminal-body::-webkit-scrollbar-track {
                background: transparent;
            }
            .terminal-body::-webkit-scrollbar-thumb {
                background: rgba(114, 112, 114, 0.3);
                border-radius: 3px;
            }
            .terminal-body::-webkit-scrollbar-thumb:hover {
                background: rgba(114, 112, 114, 0.5);
            }

            /* Scanline overlay */
            .scanlines {
                position: absolute;
                top: 38px;
                left: 0;
                right: 0;
                height: 420px;
                background: repeating-linear-gradient(
                    transparent,
                    transparent 2px,
                    rgba(0, 0, 0, 0.03) 2px,
                    rgba(0, 0, 0, 0.03) 4px
                );
                pointer-events: none;
                z-index: 2;
            }

            /* Fade at top of scroll area */
            .scroll-fade {
                position: absolute;
                top: 38px;
                left: 0;
                right: 6px;
                height: 30px;
                background: linear-gradient(to bottom, #19181a, transparent);
                pointer-events: none;
                z-index: 3;
                opacity: 0;
                transition: opacity 0.3s;
            }

            .scroll-fade.visible {
                opacity: 1;
            }

            .line {
                display: block;
                margin-bottom: 4px;
                font-size: 13px;
                line-height: 1.65;
                opacity: 0;
                transform: translateY(4px);
                white-space: pre-wrap;
                word-break: break-all;
            }

            .line.visible {
                animation: line-appear 0.12s ease-out forwards;
            }

            @keyframes line-appear {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Prompt pieces */
            .prompt-user {
                color: #a9dc76;
                font-weight: 600;
            }
            .prompt-at {
                color: #727072;
            }
            .prompt-host {
                color: #78dce8;
            }
            .prompt-colon {
                color: #727072;
            }
            .prompt-path {
                color: #ab9df2;
            }
            .prompt-git {
                color: #ffd866;
            }
            .prompt-symbol {
                color: #ff6188;
                font-weight: 700;
            }

            .command {
                color: #fcfcfa;
            }
            .cmd-bin {
                color: #a9dc76;
            }
            .cmd-flag {
                color: #fc9867;
            }
            .cmd-str {
                color: #ffd866;
            }
            .cmd-kw {
                color: #ff6188;
            }
            .cmd-func {
                color: #78dce8;
            }
            .cmd-comment {
                color: #727072;
                font-style: italic;
            }
            .cmd-num {
                color: #ab9df2;
            }
            .cmd-op {
                color: #ff6188;
            }
            .cmd-var {
                color: #fc9867;
            }

            .output {
                color: #727072;
            }
            .out-ok {
                color: #a9dc76;
            }
            .out-warn {
                color: #ffd866;
            }
            .out-err {
                color: #ff6188;
            }
            .out-info {
                color: #78dce8;
            }
            .out-purple {
                color: #ab9df2;
            }
            .out-white {
                color: #fcfcfa;
            }
            .out-orange {
                color: #fc9867;
            }

            /* Cursor */
            .cursor {
                display: inline-block;
                width: 8px;
                height: 15px;
                background: #fcfcfa;
                margin-left: 1px;
                vertical-align: middle;
                animation: cursor-blink 0.8s step-end infinite;
            }

            @keyframes cursor-blink {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0;
                }
            }

            /* Progress bar */
            .progress-bar {
                width: 220px;
                height: 10px;
                background: #2d2a2e;
                border-radius: 2px;
                overflow: hidden;
                display: inline-block;
                vertical-align: middle;
            }

            .progress-bar-fill {
                height: 100%;
                width: 0%;
                background: linear-gradient(
                    90deg,
                    #ff6188,
                    #fc9867,
                    #ffd866,
                    #a9dc76
                );
                border-radius: 2px;
                transition: width 0.08s linear;
            }

            .progress-text {
                color: #727072;
                font-size: 13px;
            }

            .spinner-char {
                color: #78dce8;
                display: inline-block;
                width: 1ch;
            }

            /* Status bar */
            .status-bar {
                height: 26px;
                background: #ab9df2;
                display: flex;
                align-items: center;
                padding: 0 12px;
                font-size: 11px;
                color: #19181a;
                font-weight: 600;
                gap: 14px;
                position: relative;
                z-index: 5;
            }

            .status-bar-right {
                margin-left: auto;
                display: flex;
                gap: 14px;
            }

            .status-section {
                display: flex;
                align-items: center;
                gap: 4px;
            }

            /* Boot flicker */
            .terminal-body {
                animation: screen-on 0.3s ease-out 0.3s both;
            }

            @keyframes screen-on {
                0% {
                    opacity: 0;
                }
                50% {
                    opacity: 0.5;
                }
                100% {
                    opacity: 1;
                }
            }

            /* Subtle border glow */
            .terminal::after {
                content: "";
                position: absolute;
                inset: -1px;
                border-radius: 11px;
                padding: 1px;
                background: linear-gradient(
                    135deg,
                    rgba(171, 157, 242, 0.15),
                    transparent 40%,
                    transparent 60%,
                    rgba(120, 220, 232, 0.15)
                );
                -webkit-mask:
                    linear-gradient(#fff 0 0) content-box,
                    linear-gradient(#fff 0 0);
                -webkit-mask-composite: xor;
                mask-composite: exclude;
                pointer-events: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="author">
                <span class="prompt-user">John</span> -
                <a href="mailto:saltyfireball@pm.me">saltyfireball@pm.me</a>
            </div>
            <div class="terminal">
                <div class="title-bar">
                    <div class="title-bar-dots">
                        <div class="dot dot-red"></div>
                        <div class="dot dot-yellow"></div>
                        <div class="dot dot-green"></div>
                    </div>
                    <div class="title-bar-text">johnny@dev — zsh — 80×24</div>
                </div>

                <div class="scroll-fade" id="scrollFade"></div>
                <div class="scanlines"></div>
                <div class="terminal-body" id="terminalBody"></div>

                <div class="status-bar">
                    <span class="status-section">NORMAL</span>
                    <span class="status-section">zsh</span>
                    <div class="status-bar-right">
                        <span class="status-section" id="statusSpinner"
                            >⠋ loading</span
                        >
                        <span class="status-section">utf-8</span>
                        <span class="status-section" id="statusLine">ln 1</span>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const terminal = document.getElementById("terminalBody");
            const statusLine = document.getElementById("statusLine");
            const statusSpinner = document.getElementById("statusSpinner");
            const scrollFade = document.getElementById("scrollFade");
            let lineCount = 0;

            // Scroll fade indicator
            terminal.addEventListener("scroll", () => {
                scrollFade.classList.toggle("visible", terminal.scrollTop > 10);
            });

            // Status bar spinner
            const spinnerFrames = [
                "⠋",
                "⠙",
                "⠹",
                "⠸",
                "⠼",
                "⠴",
                "⠦",
                "⠧",
                "⠇",
                "⠏",
            ];
            let spinnerIdx = 0;
            setInterval(() => {
                spinnerIdx = (spinnerIdx + 1) % spinnerFrames.length;
                statusSpinner.textContent =
                    spinnerFrames[spinnerIdx] + " loading";
            }, 80);

            function scrollToBottom() {
                terminal.scrollTop = terminal.scrollHeight;
            }

            function createLine(content) {
                const div = document.createElement("div");
                div.className = "line";
                div.innerHTML = content;
                terminal.appendChild(div);
                lineCount++;
                statusLine.textContent = `ln ${lineCount}`;
                // Force layout then animate
                void div.offsetHeight;
                div.classList.add("visible");
                scrollToBottom();
                return div;
            }

            function prompt() {
                return `<span class="prompt-user">johnny</span><span class="prompt-at">@</span><span class="prompt-host">dev</span><span class="prompt-colon">:</span><span class="prompt-path">~/projects/app</span> <span class="prompt-git">(main)</span> <span class="prompt-symbol">❯</span> `;
            }

            function sleep(ms) {
                return new Promise((r) => setTimeout(r, ms));
            }

            async function type(lineEl, parts, speed = 38) {
                const cursor = document.createElement("span");
                cursor.className = "cursor";
                lineEl.appendChild(cursor);

                const chars = [];
                for (const p of parts) {
                    for (const c of p.text)
                        chars.push({ char: c, cls: p.cls || "command" });
                }

                let curSpan = null,
                    curCls = null;
                for (const { char, cls } of chars) {
                    if (cls !== curCls) {
                        curSpan = document.createElement("span");
                        curSpan.className = cls;
                        lineEl.insertBefore(curSpan, cursor);
                        curCls = cls;
                    }
                    curSpan.textContent += char;
                    scrollToBottom();
                    await sleep(speed + (Math.random() * 24 - 12));
                }
                cursor.remove();
            }

            async function spinner(text, duration = 1200) {
                const line = createLine("");
                const sc = document.createElement("span");
                sc.className = "spinner-char";
                line.appendChild(sc);
                const lb = document.createElement("span");
                lb.className = "output";
                lb.textContent = " " + text;
                line.appendChild(lb);

                const frames = [
                    "⠋",
                    "⠙",
                    "⠹",
                    "⠸",
                    "⠼",
                    "⠴",
                    "⠦",
                    "⠧",
                    "⠇",
                    "⠏",
                ];
                let i = 0;
                const t0 = Date.now();
                while (Date.now() - t0 < duration) {
                    sc.textContent = frames[i++ % frames.length];
                    await sleep(80);
                }
                sc.textContent = "✓";
                sc.style.color = "#a9dc76";
                lb.style.color = "#a9dc76";
            }

            async function progress(label, duration = 2000) {
                const line = createLine("");
                line.innerHTML = `<span class="out-info">${label}</span> `;

                const bar = document.createElement("span");
                bar.className = "progress-bar";
                const fill = document.createElement("span");
                fill.className = "progress-bar-fill";
                bar.appendChild(fill);
                line.appendChild(bar);

                const pct = document.createElement("span");
                pct.className = "progress-text";
                pct.textContent = "  0%";
                line.appendChild(pct);

                const steps = 50;
                const dt = duration / steps;
                for (let i = 1; i <= steps; i++) {
                    const p = Math.round((i / steps) * 100);
                    fill.style.width = p + "%";
                    pct.textContent = `  ${p}%`;
                    scrollToBottom();
                    await sleep(dt + (Math.random() * 15 - 7));
                }
            }

            // Output a line — ALWAYS await this to keep ordering strict
            async function o(text, cls = "output", delay = 0) {
                if (delay) await sleep(delay);
                createLine(`<span class="${cls}">${text}</span>`);
            }

            // ── Main sequence ──
            async function run() {
                await sleep(500);

                // ── neofetch-style splash ──
                await o("");
                await o(
                    '  <span class="out-info">      ▄▄▄▄▄▄▄▄▄      </span>  <span class="out-white">johnny</span><span class="output">@</span><span class="out-info">dev</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">    ▄▀         ▀▄    </span>  <span class="output">─────────────</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">   █   ●     ●   █   </span>  <span class="out-purple">OS:</span> <span class="output">Arch Linux x86_64</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">   █       ▄     █   </span>  <span class="out-purple">Shell:</span> <span class="output">zsh 5.9</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">   █    ▀▀▀▀    █    </span>  <span class="out-purple">Python:</span> <span class="output">3.12.1</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">    ▀▄         ▄▀    </span>  <span class="out-purple">Node:</span> <span class="output">20.11.0</span>',
                );
                await sleep(60);
                await o(
                    '  <span class="out-info">      ▀▀▀▀▀▀▀▀▀      </span>  <span class="out-purple">Uptime:</span> <span class="output">3 hours, 42 mins</span>',
                );
                await sleep(60);
                await o("");
                await sleep(60);
                await o(
                    '  <span class="out-err">███</span><span class="out-ok">███</span><span class="out-warn">███</span><span class="out-info">███</span><span class="out-purple">███</span><span class="out-orange">███</span><span class="out-white">███</span>',
                );
                await o("");
                await sleep(600);

                // ── Command 1: create virtualenv ──
                const c1 = createLine(prompt());
                await type(c1, [
                    { text: "python3", cls: "cmd-bin" },
                    { text: " -m ", cls: "command" },
                    { text: "venv", cls: "cmd-func" },
                    { text: " .venv", cls: "cmd-str" },
                    { text: " && ", cls: "cmd-op" },
                    { text: "source", cls: "cmd-kw" },
                    { text: " .venv/bin/activate", cls: "cmd-str" },
                ]);
                await sleep(300);
                await spinner("Creating virtual environment...", 900);
                await o(
                    '<span class="out-ok">(.venv)</span> <span class="output">Virtual environment activated</span>',
                );
                await o("", "output", 200);

                // ── Command 2: pip install ──
                const c2 = createLine(prompt());
                await type(c2, [
                    { text: "pip", cls: "cmd-bin" },
                    { text: " install", cls: "command" },
                    { text: " -r", cls: "cmd-flag" },
                    { text: " requirements.txt", cls: "cmd-str" },
                ]);
                await sleep(300);

                await o(
                    'Collecting <span class="out-info">fastapi</span><span class="output">==0.109.0</span>',
                    "output",
                    150,
                );
                await o(
                    'Collecting <span class="out-info">uvicorn</span><span class="output">[standard]==0.27.0</span>',
                    "output",
                    120,
                );
                await o(
                    'Collecting <span class="out-info">sqlalchemy</span><span class="output">==2.0.25</span>',
                    "output",
                    100,
                );
                await o(
                    'Collecting <span class="out-info">pydantic</span><span class="output">==2.5.3</span>',
                    "output",
                    100,
                );
                await o(
                    'Collecting <span class="out-info">redis</span><span class="output">==5.0.1</span>',
                    "output",
                    80,
                );
                await progress("Installing packages", 2200);
                await sleep(150);
                await o(
                    '<span class="out-ok">✓</span> <span class="output">Successfully installed 23 packages</span>',
                );
                await o("", "output", 300);

                // ── Command 3: run a python script inline ──
                const c3 = createLine(prompt());
                await type(c3, [
                    { text: "python3", cls: "cmd-bin" },
                    { text: " -c", cls: "cmd-flag" },
                    {
                        text: " \"import sys; print(f'Python {sys.version_info.major}.{sys.version_info.minor}')\"",
                        cls: "cmd-str",
                    },
                ]);
                await sleep(400);
                await o(
                    '<span class="out-info">Python 3.12</span>',
                    "output",
                    200,
                );
                await o("", "output", 200);

                // ── Command 4: run pytest with real output ──
                const c4 = createLine(prompt());
                await type(c4, [
                    { text: "pytest", cls: "cmd-bin" },
                    { text: " tests/", cls: "cmd-str" },
                    { text: " -v", cls: "cmd-flag" },
                    { text: " --tb=short", cls: "cmd-flag" },
                    { text: " --color=yes", cls: "cmd-flag" },
                ]);
                await sleep(400);

                await o(
                    '<span class="out-purple">======================== test session starts =========================</span>',
                    "output",
                    100,
                );
                await o(
                    '<span class="output">platform linux -- Python 3.12.1, pytest-7.4.4</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="output">rootdir: /home/johnny/projects/app</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="output">plugins: asyncio-0.23.3, anyio-4.2.0</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="output">collected</span> <span class="out-white">18 items</span>',
                    "output",
                    150,
                );
                await o("", "output", 100);

                const tests = [
                    ["tests/test_auth.py::test_login", true],
                    ["tests/test_auth.py::test_logout", true],
                    ["tests/test_auth.py::test_refresh_token", true],
                    ["tests/test_api.py::test_get_users", true],
                    ["tests/test_api.py::test_create_user", true],
                    ["tests/test_api.py::test_delete_user", true],
                    ["tests/test_api.py::test_update_user", true],
                    ["tests/test_api.py::test_rate_limit", false],
                    ["tests/test_db.py::test_connection_pool", true],
                    ["tests/test_db.py::test_migration", true],
                    ["tests/test_db.py::test_rollback", true],
                    ["tests/test_cache.py::test_redis_set", true],
                    ["tests/test_cache.py::test_redis_get", true],
                    ["tests/test_cache.py::test_cache_invalidation", true],
                    ["tests/test_cache.py::test_ttl_expiry", true],
                    ["tests/test_ws.py::test_websocket_connect", true],
                    ["tests/test_ws.py::test_websocket_broadcast", true],
                    ["tests/test_ws.py::test_websocket_auth", true],
                ];

                for (const [name, passed] of tests) {
                    const status = passed
                        ? '<span class="out-ok">PASSED</span>'
                        : '<span class="out-err">FAILED</span>';
                    await o(
                        `<span class="output">${name}</span> ${status}`,
                        "output",
                        120,
                    );
                }

                await o("", "output", 100);
                await o(
                    '<span class="out-err">FAILED tests/test_api.py::test_rate_limit</span>',
                    "output",
                    100,
                );
                await o(
                    '<span class="output">  AssertionError: Expected status 429, got 200</span>',
                    "output",
                    60,
                );
                await o("", "output", 60);
                await o(
                    '<span class="out-purple">================== </span><span class="out-ok">17 passed</span><span class="output">, </span><span class="out-err">1 failed</span><span class="out-purple"> in 4.28s ==================</span>',
                    "output",
                    200,
                );
                await o("", "output", 400);

                // ── Command 5: grep for the issue ──
                const c5 = createLine(prompt());
                await type(c5, [
                    { text: "rg", cls: "cmd-bin" },
                    { text: ' "rate_limit"', cls: "cmd-str" },
                    { text: " src/", cls: "command" },
                    { text: " --color=always", cls: "cmd-flag" },
                ]);
                await sleep(300);

                await o(
                    '<span class="out-purple">src/middleware/rate_limiter.py</span><span class="output">:</span><span class="out-ok">14</span><span class="output">:</span><span class="cmd-kw">async def</span> <span class="cmd-func">rate_limit</span><span class="output">(request: Request):</span>',
                    "output",
                    120,
                );
                await o(
                    '<span class="out-purple">src/middleware/rate_limiter.py</span><span class="output">:</span><span class="out-ok">27</span><span class="output">:</span>    <span class="cmd-comment"># TODO: fix window reset logic</span>',
                    "output",
                    120,
                );
                await o(
                    '<span class="out-purple">src/routes/api.py</span><span class="output">:</span><span class="out-ok">43</span><span class="output">:</span>    <span class="output">depends=[Depends(</span><span class="cmd-func">rate_limit</span><span class="output">)]</span>',
                    "output",
                    120,
                );
                await o("", "output", 300);

                // ── Command 6: quick sed fix ──
                const c6 = createLine(prompt());
                await type(c6, [
                    { text: "sed", cls: "cmd-bin" },
                    { text: " -i", cls: "cmd-flag" },
                    {
                        text: " 's/window > max_requests/window >= max_requests/'",
                        cls: "cmd-str",
                    },
                    { text: " src/middleware/rate_limiter.py", cls: "command" },
                ]);
                await sleep(300);
                await o("", "output", 200);

                // ── Command 7: re-run single test ──
                const c7 = createLine(prompt());
                await type(c7, [
                    { text: "pytest", cls: "cmd-bin" },
                    {
                        text: " tests/test_api.py::test_rate_limit",
                        cls: "cmd-str",
                    },
                    { text: " -v", cls: "cmd-flag" },
                ]);
                await sleep(300);

                await o(
                    '<span class="out-purple">======================== test session starts =========================</span>',
                    "output",
                    100,
                );
                await o(
                    '<span class="output">collected</span> <span class="out-white">1 item</span>',
                    "output",
                    120,
                );
                await o("", "output", 80);
                await o(
                    '<span class="output">tests/test_api.py::test_rate_limit</span> <span class="out-ok">PASSED</span>',
                    "output",
                    200,
                );
                await o("", "output", 80);
                await o(
                    '<span class="out-purple">=================== </span><span class="out-ok">1 passed</span><span class="out-purple"> in 0.34s ============================</span>',
                    "output",
                    200,
                );
                await o("", "output", 400);

                // ── Command 8: uvicorn ──
                const c8 = createLine(prompt());
                await type(c8, [
                    { text: "uvicorn", cls: "cmd-bin" },
                    { text: " app.main:app", cls: "cmd-str" },
                    { text: " --reload", cls: "cmd-flag" },
                    { text: " --host", cls: "cmd-flag" },
                    { text: " 0.0.0.0", cls: "cmd-num" },
                    { text: " --port", cls: "cmd-flag" },
                    { text: " 8000", cls: "cmd-num" },
                ]);
                await sleep(300);

                await spinner("Starting server...", 1000);
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Uvicorn running on </span><span class="out-info">http://0.0.0.0:8000</span>',
                    "output",
                    100,
                );
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Started reloader process [</span><span class="out-purple">28451</span><span class="output">]</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Started server process [</span><span class="out-purple">28453</span><span class="output">]</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Waiting for application startup.</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Application startup complete.</span>',
                    "output",
                    200,
                );
                await o("", "output", 100);

                // Simulate some requests rolling in
                const methods = [
                    ["GET", "/api/v1/users", "200", "12ms"],
                    ["POST", "/api/v1/users", "201", "45ms"],
                    ["GET", "/api/v1/users/42", "200", "8ms"],
                    ["GET", "/health", "200", "2ms"],
                    ["DELETE", "/api/v1/users/17", "204", "31ms"],
                    ["GET", "/api/v1/users?limit=100", "200", "67ms"],
                    ["POST", "/api/v1/auth/login", "200", "89ms"],
                    ["GET", "/api/v1/ws/connect", "101", "3ms"],
                ];

                for (const [method, path, status, time] of methods) {
                    const methodCls =
                        method === "GET"
                            ? "out-ok"
                            : method === "POST"
                              ? "out-info"
                              : method === "DELETE"
                                ? "out-err"
                                : "out-warn";
                    const statusCls =
                        status.startsWith("2") || status === "101"
                            ? "out-ok"
                            : "out-err";
                    await o(
                        `<span class="output">INFO:  </span><span class="${methodCls}">${method.padEnd(7)}</span> <span class="out-white">${path}</span>  <span class="${statusCls}">${status}</span>  <span class="out-purple">${time}</span>`,
                        "output",
                        350,
                    );
                }

                await o("", "output", 300);
                await o('<span class="out-warn">^C</span>', "output", 200);
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Shutting down...</span>',
                    "output",
                    100,
                );
                await o(
                    '<span class="out-ok">INFO</span><span class="output">:     Finished server process [</span><span class="out-purple">28453</span><span class="output">]</span>',
                    "output",
                    100,
                );
                await o("", "output", 400);

                // ── Command 9: git commit ──
                const c9 = createLine(prompt());
                await type(c9, [
                    { text: "git", cls: "cmd-bin" },
                    { text: " add", cls: "command" },
                    { text: " -A", cls: "cmd-flag" },
                    { text: " && ", cls: "cmd-op" },
                    { text: "git", cls: "cmd-bin" },
                    { text: " commit", cls: "command" },
                    { text: " -m", cls: "cmd-flag" },
                    {
                        text: ' "fix: rate limiter window boundary check"',
                        cls: "cmd-str",
                    },
                ]);
                await sleep(300);

                await o(
                    '<span class="output">[</span><span class="out-ok">main e9b4d58</span><span class="output">] fix: rate limiter window boundary check</span>',
                    "output",
                    150,
                );
                await o(
                    '<span class="output"> 1 file changed, 1 insertion(+), 1 deletion(-)</span>',
                    "output",
                    100,
                );
                await o("", "output", 300);

                // ── Command 10: push ──
                const c10 = createLine(prompt());
                await type(c10, [
                    { text: "git", cls: "cmd-bin" },
                    { text: " push", cls: "command" },
                    { text: " origin main", cls: "cmd-str" },
                ]);
                await sleep(200);

                await spinner("Enumerating objects...", 600);
                await spinner("Compressing objects...", 500);
                await o(
                    '<span class="output">To github.com:johnny/app.git</span>',
                    "output",
                    100,
                );
                await o(
                    '   <span class="out-info">a3f7c21..e9b4d58</span>  <span class="output">main → main</span>',
                    "output",
                    100,
                );
                await o("", "output", 200);

                await o(
                    '<span class="out-ok">┌─────────────────────────────────────────────────┐</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="out-ok">│</span>  <span class="out-ok">✓</span> <span class="out-white">All done. Bug fixed, tests green, pushed.</span>   <span class="out-ok">│</span>',
                    "output",
                    80,
                );
                await o(
                    '<span class="out-ok">└─────────────────────────────────────────────────┘</span>',
                    "output",
                    80,
                );
                await o("", "output", 400);

                // Final prompt with blinking cursor
                const fin = createLine(prompt());
                const cur = document.createElement("span");
                cur.className = "cursor";
                fin.appendChild(cur);
                scrollToBottom();

                // Restart loop
                await sleep(5000);
                terminal.innerHTML = "";
                lineCount = 0;
                run();
            }

            run();
        </script>
    </body>
</html>
